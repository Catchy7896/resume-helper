<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>简历填写助手</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="resize-handle"></div>
  <div class="container">
    <div class="header">
      <h1>📄 简历填写助手</h1>
      <div class="header-actions">
        <button id="floatWindowBtn" class="pin-btn" title="悬浮窗">📌</button>
      </div>
    </div>

    <div class="tabs">
      <button class="tab-btn active" data-tab="resume">简历内容</button>
      <button class="tab-btn" data-tab="applications">投递记录</button>
    </div>

    <div class="tab-content active" id="resumeTab">
      <div class="upload-section" id="uploadSection">
        <input type="file" id="fileInput" accept=".md,.markdown" style="display:none;">
        <button id="uploadBtn" class="upload-btn">上传Markdown文件</button>
        <div id="fileStatus" class="file-status"></div>
      </div>

      <div class="reupload-section" id="reuploadSection" style="display:none;">
        <button id="reuploadBtn" class="reupload-btn">重新上传文件</button>
      </div>

      <div class="tags-section" id="tagsSection" style="display:none;">
        <div class="section-header-actions">
          <h2>简历内容</h2>
          <div class="section-toolbar">
            <button id="quickFillBtn" class="toolbar-btn quick-fill-btn" title="一键闪填当前页面表单">⚡ 一键闪填</button>
            <button id="addSectionBtn" class="toolbar-btn" title="添加模块">+ 模块</button>
            <button id="exportMarkdownBtn" class="toolbar-btn" title="导出Markdown">📥 导出</button>
          </div>
          <div class="action-hint">
            <span class="hint-text">💡 点击字段名复制到剪贴板，或点击"填写"按钮直接填入当前页面的表单</span>
          </div>
        </div>
        <div id="tagsContainer" class="tags-container"></div>
      </div>
    </div>

    <div class="tab-content" id="applicationsTab">
      <div class="applications-header">
        <h2>投递记录</h2>
        <button id="addApplicationBtn" class="add-btn">+ 添加记录</button>
      </div>

      <div class="applications-tabs">
        <button class="app-tab-btn active" data-status="pending">待投递</button>
        <button class="app-tab-btn" data-status="submitted">已投递</button>
      </div>

      <div id="applicationsContainer" class="applications-container"></div>
    </div>

    <div id="message" class="message"></div>
  </div>

  <div id="applicationDialog" class="dialog" style="display:none;">
    <div class="dialog-content">
      <h3 id="applicationDialogTitle">添加投递记录</h3>
      <input type="text" id="appTitleInput" placeholder="公司/职位名称" class="dialog-input">
      <input type="date" id="appDateInput" class="dialog-input">
      <input type="url" id="appLinkInput" placeholder="投递链接（可选）" class="dialog-input">
      <textarea id="appNotesInput" placeholder="备注（可选）" class="dialog-textarea"></textarea>
      <select id="appStatusSelect" class="dialog-input">
        <option value="pending">待投递</option>
        <option value="submitted">已投递</option>
      </select>
      <div class="dialog-actions">
        <button id="appDialogCancel" class="dialog-btn cancel">取消</button>
        <button id="appDialogConfirm" class="dialog-btn confirm">确定</button>
      </div>
    </div>
  </div>

  <!-- 简历编辑对话框 -->
  <div id="resumeEditDialog" class="dialog" style="display:none;">
    <div class="dialog-content">
      <h3 id="resumeEditDialogTitle">编辑简历内容</h3>
      <div class="dialog-form-group">
        <label>标签/字段名：</label>
        <input type="text" id="resumeLabelInput" placeholder="例如：姓名、工作经历" class="dialog-input">
      </div>
      <div class="dialog-form-group">
        <label>内容：</label>
        <textarea id="resumeValueInput" placeholder="输入内容，支持多行" class="dialog-textarea"></textarea>
      </div>
      <div class="dialog-actions">
        <button id="resumeEditDialogCancel" class="dialog-btn cancel">取消</button>
        <button id="resumeEditDialogConfirm" class="dialog-btn confirm">确定</button>
      </div>
    </div>
  </div>

  <!-- 添加模块对话框 -->
  <div id="addSectionDialog" class="dialog" style="display:none;">
    <div class="dialog-content">
      <h3>添加新模块</h3>
      <div class="dialog-form-group">
        <label>模块名称：</label>
        <input type="text" id="sectionNameInput" placeholder="例如：基本信息、工作经历" class="dialog-input">
      </div>
      <div class="dialog-form-group">
        <label>子项名称（可选）：</label>
        <input type="text" id="groupTitleInput" placeholder="例如：XX公司、XX项目" class="dialog-input">
      </div>
      <div class="dialog-actions">
        <button id="addSectionDialogCancel" class="dialog-btn cancel">取消</button>
        <button id="addSectionDialogConfirm" class="dialog-btn confirm">确定</button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>

